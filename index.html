
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Town Hall Project 2018</title>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="/styles/bootstrap.min.css">
    <script id="event-template" type="text/x-handlebars-template">
      <div class="col-sm-12">
        <div class="panel panel-secondary">
          <div class="panel-heading">
            <h4>{{Location}}</h4>
            <p>{{Member}}</p>
          </div>
          <div class="panel-body">
            <ul class="list-group">
              <li class="list-group-item"><span class="profile-summary-key">Party: </span><span class="profile-summary-value">{{Party}}</span></li>
              <li class="list-group-item"><span class="profile-summary-key">Meeting Type:</span> <span class="profile-summary-value">{{meetingType}}</span></li>
              <li class="list-group-item"><span class="profile-summary-key">Date: </span><span class="profile-summary-value">{{Date}}</span></li>
              <li class="list-group-item"><span class="profile-summary-key">Time: </span><span class="profile-summary-value">{{Time}}</span></li>
              <li class="list-group-item"><span class="profile-summary-key">Address:</span> <span class="profile-summary-value">{{address}}</span></li>
            </ul>
          </div>

        </div>
      </div>
      </div>

    </script>
  </head>
  <body>
    <nav class="navbar navbar-default ">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-nav" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="collapse navbar-collapse" id="main-nav">
          <ul class="nav navbar-nav">
            <li id="home" ><a href="/">Home<span class="sr-only">(current)</span></a></li>
            <li id="about"><a href="#about">About</a></li>
        </div>
    </nav>
    <header class="site-header clearfix">

    <section class=" container container-fluid">

    <div class="row">
      <div class="col-sm-4">
        <div  class=" text-left site-header clearfix col-md-12 displayoff">
              <h2 >Show Up.</h2>
              <h2 >Speak Up.</h2>
              <h2 class="text-secondary-dark">Fight Back.</h2>
              <form id="look-up" class="form-inline" action="index.html" method="post">
                <div class="form-group">
                  <label  for="zip"></label>
                  <input class="form-control input-md " type="zip" name="" value="" placeholder="Zip Code">
                  <button type="submit" name="button" class="btn btn-primary btn-sm ">Find Town Hall</button>
                </div>

              </form>
        </div>
      </div>
      <section class="results col-sm-8 state-info-bg">
        <div id="nearest"></div>
      </section>
    </div>
    <section class=" container container-fluid">
    <main>
    </main>
  </header>
    <div id="map"></div>
    <p>Google Sheets API Quickstart</p>

    <!--Add buttons to initiate auth sequence and sign out-->
    <button id="authorize-button" style="display: none;">Authorize</button>
    <button id="signout-button" style="display: none;">Sign Out</button>

    <pre id="content"></pre>

    <footer>
    </footer>
    <!-- Vendor Files -->
    <script src="/vendor/scripts/jquery-2.1.4.js"></script>
    <script src="/vendor/scripts/bootstrap.min.js"></script>
    <script src="/node_modules/handlebars/dist/handlebars.js"></script>

    <script src="https://www.gstatic.com/firebasejs/3.6.6/firebase.js"></script>

    <script src="/scripts/models/event.js"></script>
    <script src="/scripts/views/eventEntry.js"></script>
    <script src="/scripts/views/mapUsers.js"></script>
    <script src="data.js"></script>

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD_1gaWM06y2_P1kbH4jTMi3zy6vJUYp1E&callback=initMap&libraries=visualization,geometry"></script>
    <!-- <script type="text/javascript">
          // Client ID and API key from the Developer Console
          var CLIENT_ID = '47559178634-0bo578k2ifb2pboelce7nt1ls6aosrku.apps.googleusercontent.com';

          // Array of API discovery doc URLs for APIs used by the quickstart
          var DISCOVERY_DOCS = ["https://sheets.googleapis.com/$discovery/rest?version=v4"];

          // Authorization scopes required by the API; multiple scopes can be
          // included, separated by spaces.
          var SCOPES = "https://www.googleapis.com/auth/spreadsheets.readonly";

          var authorizeButton = document.getElementById('authorize-button');
          var signoutButton = document.getElementById('signout-button');

          /**
           *  On load, called to load the auth2 library and API client library.
           */
          function handleClientLoad() {
            gapi.load('client:auth2', initClient);
          }

          /**
           *  Initializes the API client library and sets up sign-in state
           *  listeners.
           */
          function initClient() {
            gapi.client.init({
              discoveryDocs: DISCOVERY_DOCS,
              clientId: CLIENT_ID,
              scope: SCOPES
            }).then(function () {
              // Listen for sign-in state changes.
              // listMajors();

              gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

              // Handle the initial sign-in state.
              updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
              authorizeButton.onclick = handleAuthClick;
              signoutButton.onclick = handleSignoutClick;
            });
          }

          /**
           *  Called when the signed in status changes, to update the UI
           *  appropriately. After a sign-in, the API is called.
           */
          function updateSigninStatus(isSignedIn) {
            if (isSignedIn) {
              authorizeButton.style.display = 'none';
              signoutButton.style.display = 'block';
              listMajors();
            } else {

              authorizeButton.style.display = 'block';
              signoutButton.style.display = 'none';
            }
          }

          /**
           *  Sign in the user upon button click.
           */
          function handleAuthClick(event) {
            gapi.auth2.getAuthInstance().signIn();
          }

          /**
           *  Sign out the user upon button click.
           */
          function handleSignoutClick(event) {
            gapi.auth2.getAuthInstance().signOut();
          }

          /**
           * Append a pre element to the body containing the given message
           * as its text node. Used to display the results of the API call.
           *
           * @param {string} message Text to be placed in pre element.
           */
          function appendPre(message) {
            var pre = document.getElementById('content');
            var textContent = document.createTextNode(message + '\n');
            pre.appendChild(textContent);
          }

          var googlekeys = ['Member', 	'Party'	, 'State'	, 'District', 	'meetingType', 	'Date', 	'Time'	,'timeZone', 	'Location', 	'streetAddress', 	'City', 	'State'	, 'Zip', 'Notes']

          function listMajors() {
            gapi.client.sheets.spreadsheets.values.get({
              spreadsheetId: '1yq1NT9DZ2z3B8ixhid894e77u9rN5XIgOwWtTW72IYA',
              sheetID: 1473996386,
              range: 'Upcoming Events!C:P',
            }).then(function(response) {
              var range = response.result;

              if (range.values.length > 0) {
                for (i = 12; i < range.values.length; i++) {
                  var row = range.values[i];
                  rowObj = {}
                  // for (var i = 0; i < 1; i++) {
                  //   rowObj[googlekeys[i]] = row[i];
                  // }

                  // Print columns A and E, which correspond to indices 0 and 4.
                  appendPre(row);
                }
              } else {
                appendPre('No data found.');
              }
            }, function(response) {
              appendPre('Error: ' + response.result.error.message);
            });
          }

        </script>

        <script async defer src="https://apis.google.com/js/api.js"
          onload="this.onload=function(){};handleClientLoad()"
          onreadystatechange="if (this.readyState === 'complete') this.onload()">
        </script> -->


  </body>
</html>
